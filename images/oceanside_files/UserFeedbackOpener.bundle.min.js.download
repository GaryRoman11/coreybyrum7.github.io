!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("UserFeedbackOpener",[],t):"object"==typeof exports?exports.UserFeedbackOpener=t():e.UserFeedbackOpener=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://static.parastorage.com/services/user-feedback-opener/1.61.0/",n(n.s=101)}([function(e,t,n){"use strict";var r=n(27),o=n(84),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function u(e){return null!==e&&"object"==typeof e}function a(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:a,isStream:function(e){return u(e)&&a(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){e.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5).Host;t.setHost=function(e){r=e},t.getHost=function(){return r},t.isWebWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},t.requestWindow=function(e){if("undefined"!=typeof window&&window)try{return window.top===window.self?e?e(window):window:null}catch(e){return null}return null}},function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.now=function(){return"undefined"!=typeof performance&&performance&&performance.now?performance.now():-1},t.getDesktopSize=function(e){return(e.screen&&e.screen.width||0)+"x"+(e.screen&&e.screen.height||0)},t.getWindowSize=function(e){var t=0,n=0;return e.innerWidth?(t=e.innerWidth,n=e.innerHeight):e.document&&(e.document.documentElement&&e.document.documentElement.clientWidth?(t=e.document.documentElement.clientWidth,n=e.document.documentElement.clientHeight):e.document.body&&e.document.body.clientWidth&&(t=e.document.body.clientWidth,n=e.document.body.clientHeight)),t+"x"+n},t.sendBeacon=function(e){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(e)},t.readCookie=function(e){if("undefined"==typeof document)return null;for(var t=0,n=document.cookie.split(";");t<n.length;t++){for(var r=n[t].split("="),o=r[0],i=r[1];" "===o[0];)o=o.substr(1);if(o===e)return i}return""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Host="frog.wix.com",t.LoggerVersion="2",function(e){e.Auto="auto",e.PostMessage="postMessage"}(t.PublishMethods||(t.PublishMethods={})),function(e){e[e.Unsupported=0]="Unsupported"}(t.Errors||(t.Errors={})),function(e){e.msid="_msid",e.clientId="_client_id",e.uuid="_uuid",e.visitorId="_visitorId",e.siteMemberId="_siteMemberId"}(t.EventContextMap||(t.EventContextMap={}))},function(e,t){},function(e,t,n){var r={EventEmitter:n(68),EmitterSubscription:n(23)};e.exports=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(2),i=0;t.getCookies=function(e){return Object.keys(e).reduce(function(t,n){var o="string"==typeof e[n]?{name:e[n]}:e[n],i=o.name,s=o.transform,u=(void 0===s?function(e){return e}:s)(r.readCookie(i));return u&&(t[n]=u),t},{})},t.buildBiUrl=function(e,t,n){var r=e.host,s=void 0===r?"":r,u=e.endpoint,a=void 0===u?"":u;void 0===n&&(n={}),s=s||o.getHost(),a=n.endpoint||a,t._=""+(new Date).getTime()+i++;var c=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])},[]);return["//"+s+"/"+a].concat(c.length?c.join("&"):[]).join("?")},t.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.constructor.name,n}return o(t,e),t}(Error);t.AssertionError=i;var s=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.constructor.name,n}return o(t,e),t}(Error);t.APINotSupportedError=s},function(e,t,n){"use strict";(function(t){var r=n(0),o=n(87),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,a={adapter:("undefined"!=typeof XMLHttpRequest?u=n(28):void 0!==t&&(u=n(28)),u),transformRequest:[function(e,t){return o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){a.headers[e]={}}),r.forEach(["post","put","patch"],function(e){a.headers[e]=r.merge(i)}),e.exports=a}).call(this,n(86))},function(e,t){var n=function(e,t){return{parse:function(t,r){var s=JSON.parse(t,i).map(o),u=s[0],a=r||n,c="object"==typeof u&&u?function t(n,r,o,i){return Object.keys(o).reduce(function(o,s){var u=o[s];if(u instanceof e){var a=n[u];"object"!=typeof a||r.has(a)?o[s]=i.call(o,s,a):(r.add(a),o[s]=i.call(o,s,t(n,r,a,i)))}else o[s]=i.call(o,s,u);return o},o)}(s,new Set,u,a):u;return a.call({"":c},"",c)},stringify:function(e,o,i){for(var s,u=new Map,a=[],c=[],f=o&&typeof o==typeof a?function(e,t){if(""===e||-1<o.indexOf(e))return t}:o||n,l=+r(u,a,f.call({"":e},"",e)),d=function(e,n){if(s)return s=!s,n;var o=f.call(this,e,n);switch(typeof o){case"object":if(null===o)return o;case t:return u.get(o)||r(u,a,o)}return o};l<a.length;l++)s=!0,c[l]=JSON.stringify(a[l],d,i);return"["+c.join(",")+"]"}};function n(e,t){return t}function r(t,n,r){var o=e(n.push(r)-1);return t.set(r,o),o}function o(t){return t instanceof e?e(t):t}function i(n,r){return typeof r===t?new e(r):r}}(String,"string");e.exports=n},function(e,t,n){e.exports={default:n(36),__esModule:!0}},function(e,t,n){var r=n(8),o=n(3),i=n(38),s=n(40),u=n(18),a=function(e,t,n){var c,f,l,d=e&a.F,p=e&a.G,h=e&a.S,m=e&a.P,v=e&a.B,g=e&a.W,y=p?o:o[t]||(o[t]={}),b=y.prototype,w=p?r:h?r[t]:(r[t]||{}).prototype;for(c in p&&(n=t),n)(f=!d&&w&&void 0!==w[c])&&u(y,c)||(l=f?w[c]:n[c],y[c]=p&&"function"!=typeof w[c]?n[c]:v&&f?i(l,r):g&&w[c]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):m&&"function"==typeof l?i(Function.call,l):l,m&&((y.virtual||(y.virtual={}))[c]=l,e&a.R&&b&&!b[c]&&s(b,c,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,n){var r=n(41),o=n(42),i=n(44),s=Object.defineProperty;t.f=n(1)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(20),o=n(21);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(53);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=function(e){function t(n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.listener=r,this.context=o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n(69));e.exports=r},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,i,s,u,a){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,o,i,s,u,a],l=0;(c=new Error(t.replace(/%s/g,function(){return f[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();e.exports.defined=function(e,t){if(void 0===e)throw new o(t)},e.exports.object=function(e,t){if(void 0!==e&&("object"!==(void 0===e?"undefined":r(e))||Array.isArray(e)||null===e))throw new o(t)},e.exports.ok=function(e,t){if(!e)throw new o(t)},e.exports.AssertionError=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=n(25),i=n(77).mapValues,s=n(78),u=n(79).log,a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._publishers=t.publishers,this._validators=t.validators||[],this._defaults=t.defaults,this._events=t.events||{},this._context=n||{},this._defaultValueTimeout=t.defaultValueTimeout||5e3,this._defaultContinueOnFail=t.defaultContinueOnFail||!1,this._onPublisherFailHandler=t.onPublisherFailHandler||e._defaultPublisherFailHandler}return r(e,[{key:"log",value:function(e,t,n){var r=this;o.defined(e,"Event object or event key must be provided.");var i=this._extractEventAndContext(e,t,n),s=i.event,u=i.context;return this._getDefaults().then(function(e){var t=Object.assign({},e,s);if(!(0===r._validators.length||r._validators.some(function(e){return e.match(t)&&(e.execute(t)||!0)})))throw new Error("No validator accepted the event. Source: "+t.src+" Evid: "+(t.evid||t.evtId));return Promise.all(r._publishers.map(function(e){var n=Object.assign({},t);return Promise.resolve().then(function(){return e(n,Object.assign({},r._context,u))}).catch(function(t){return r._onPublisherFailHandler(t,{publisherName:e.name})})})).then(function(){})})}},{key:"_extractEventAndContext",value:function(e,t,n){var r=void 0,i={};if("string"!=typeof e)r=e,i=t||i;else{if(!(r=this._events[e]))throw new o.AssertionError("Event with key '"+e+"' not found in event map.");t&&(r=Object.assign({},r,t),i=n||i)}return{event:r,context:i}}},{key:"_handleDefaultsError",value:function(e){return this._defaultContinueOnFail?(u.error(e),null):Promise.reject(e)}},{key:"_getDefaults",value:function(){var e=this;if(!this._defaults)return Promise.resolve({});var t=i(this._defaults,function(t,n){if("function"==typeof t)try{t=t()}catch(t){return e._handleDefaultsError(t)}return t&&"function"!=typeof t.then?t:s.timedPromise(t,{message:"Cannot get default value '"+n+" for BI Event'",timeout:e._defaultValueTimeout}).catch(function(t){return e._handleDefaultsError(t)})});return s.allAsObject(t)}}],[{key:"_defaultPublisherFailHandler",value:function(e,t){return t.publisherName}}]),e}();e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0),o=n(88),i=n(90),s=n(91),u=n(92),a=n(29);e.exports=function(e){return new Promise(function(t,c){var f=e.data,l=e.headers;r.isFormData(f)&&delete l["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";l.Authorization="Basic "+btoa(p+":"+h)}if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?s(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};o(t,c,r),d=null}},d.onerror=function(){c(a("Network Error",e,null,d)),d=null},d.ontimeout=function(){c(a("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var m=n(93),v=(e.withCredentials||u(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;v&&(l[e.xsrfHeaderName]=v)}if("setRequestHeader"in d&&r.forEach(l,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete l[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),c(e),d=null)}),void 0===f&&(f=null),d.send(f)})}},function(e,t,n){"use strict";var r=n(89);e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(35)),o=a(n(46)),i=a(n(65)),s=a(n(66)),u=n(67);function a(e){return e&&e.__esModule?e:{default:e}}function c(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.useNewApi=t.useNewApi||!1,this.experiments=t.experiments||{},this.loaders=[],this.baseUrl=t.baseUrl||"",t.scope&&this.load(t.scope)}return(0,s.default)(e,[{key:"add",value:function(e){this.experiments=(0,o.default)({},this.experiments,e)}},{key:"get",value:function(e){return this.experiments[e]}},{key:"enabled",value:function(e){return"true"===this.get(e)}},{key:"all",value:function(){return this.experiments}},{key:"_addLoader",value:function(e){var t=this;return this.loaders.push(e),e.then(function(){t.loaders=t.loaders.filter(function(t){return t!==e})}),e}},{key:"_getUrlWithFallback",value:function(e,t){return function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="text",r.withCredentials=!0,r.onload=function(){r.status>=200&&r.status<400?t(r.responseText):n("Failed to load "+e+", status "+r.status)},r.onerror=function(){return n("Failed to load "+e)},r.send()})}(e).catch(function(){return t})}},{key:"load",value:function(e){var t=this,n=""+this.baseUrl+(0,u.getAllInScopePath)(e,this.useNewApi),r=this._getUrlWithFallback(n,{}).then(c).then(function(e){return t.add(e)});return this._addLoader(r)}},{key:"conduct",value:function(e,t){var n=this,o=""+this.baseUrl+(0,u.getExperimentPath)(e,t,this.useNewApi),i=this._getUrlWithFallback(o,t).then(function(t){return n.add((0,r.default)({},e,t)),t});return this._addLoader(i)}},{key:"pending",value:function(){return!!this.loaders.length}},{key:"ready",value:function(){return Promise.all(this.loaders)}}]),e}();t.default=f},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(72)),i=r(n(74));t.factory=function(e){return void 0===e&&(e={}),(e.trackSession||void 0===e.trackSession)&&o.track(i.factory),i.factory(e)},t.setHost=i.setHost,t.default={factory:t.factory,setHost:i.setHost}},function(e,t,n){e.exports=n(83)},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(15),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){n(37);var r=n(3).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(16);r(r.S+r.F*!n(1),"Object",{defineProperty:n(17).f})},function(e,t,n){var r=n(39);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(17),o=n(45);e.exports=n(1)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(1)&&!n(10)(function(){return 7!=Object.defineProperty(n(43)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(9),o=n(8).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(47),i=(r=o)&&r.__esModule?r:{default:r};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){e.exports={default:n(48),__esModule:!0}},function(e,t,n){n(49),e.exports=n(3).Object.assign},function(e,t,n){var r=n(16);r(r.S+r.F,"Object",{assign:n(50)})},function(e,t,n){"use strict";var r=n(1),o=n(51),i=n(62),s=n(63),u=n(64),a=n(20),c=Object.assign;e.exports=!c||n(10)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=u(e),c=arguments.length,f=1,l=i.f,d=s.f;c>f;)for(var p,h=a(arguments[f++]),m=l?o(h).concat(l(h)):o(h),v=m.length,g=0;v>g;)p=m[g++],r&&!d.call(h,p)||(n[p]=h[p]);return n}:c},function(e,t,n){var r=n(52),o=n(61);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(18),o=n(19),i=n(54)(!1),s=n(57)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),a=0,c=[];for(n in u)n!=s&&r(u,n)&&c.push(n);for(;t.length>a;)r(u,n=t[a++])&&(~i(c,n)||c.push(n));return c}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(19),o=n(55),i=n(56);e.exports=function(e){return function(t,n,s){var u,a=r(t),c=o(a.length),f=i(s,c);if(e&&n!=n){for(;c>f;)if((u=a[f++])!=u)return!0}else for(;c>f;f++)if((e||f in a)&&a[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(22),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(22),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(58)("keys"),o=n(60);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(3),o=n(8),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(59)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(21);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(15),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.petriUrlMap={new:{conductAllInScope:"/_api/wix-laboratory-server/v1/laboratory/platform/conductAllInScope",conductExperiment:"/_api/wix-laboratory-server/v1/laboratory/platform/conductExperiment"},old:{conductAllInScope:"/_api/wix-laboratory-server/laboratory/conductAllInScope",conductExperiment:"/_api/wix-laboratory-server/laboratory/conductExperiment"}};t.getAllInScopePath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?r.new.conductAllInScope+"?scope="+e:r.old.conductAllInScope+"?scope="+e},t.getExperimentPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?r.new.conductExperiment+"?key="+e+"&fallbackValue="+t:r.old.conductExperiment+"?key="+e+"&fallback="+t}},function(e,t,n){"use strict";var r=n(23),o=n(70),i=n(71),s=n(24),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriber=new o,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new r(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var r=this;return this.addListener(e,function(){r.removeCurrentListener(),t.apply(n,arguments)})},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription||s(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(i.thatReturnsTrue).map(function(e){return e.listener}):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=t[n[r]];o&&(this._currentSubscription=o,this.__emitToSubscription.apply(this,[o].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=u},function(e,t,n){"use strict";var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=r},function(e,t,n){"use strict";var r=n(24),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this&&r(!1),this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,r=this._subscriptionsForType[t];r&&delete r[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=o},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(73),i=n(2),s=n(4),u="__isTrackingBiBrowsingSession__",a="p",c=19,f=3;function l(e){var t=function(e){return e({endpoint:a}).updateDefaults({src:c,evid:f,vsi:r.guid()}).logger()}(e),n=1;o.listen(function(e,r){var o=i.requestWindow(function(e){return{sr:s.getDesktopSize(e),wr:s.getWindowSize(e)}}),u=o.sr,a=o.wr;t.log({from:e,to:r,fis:n,sr:u,wr:a}),n=0})}t.track=function(e){!i.isWebWorker()&&i.requestWindow(function(e){return!e[u]})&&(i.requestWindow(function(e){return e[u]=!0}),l(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);function o(e){setTimeout(function(){return r.requestWindow(function(t){return e(t.location.href)})})}function i(e){r.requestWindow(function(t){var n=t.history;return["pushState","replaceState"].forEach(function(t){!function(e,t,n){if(e&&e[t]){var r=e[t];e[t]=function(){return n.apply(null,arguments),r.apply(e,arguments)}}}(n,t,function(t,n,r){return e(r)})})})}function s(e){r.requestWindow(function(t){return t.addEventListener("popstate",function(){return e(t.location.href)})})}t.listen=function(e){r.requestWindow(function(t){var n=t.document.referrer;[o,i,s].forEach(function(t){return t(function(t){e(n,t),n=t})})})}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(75)),s=o(n(80)),u=n(81),a=n(11),c=n(5),f=n(5);t.PublishMethods=f.PublishMethods;var l=n(2);t.setHost=l.setHost;var d=function(e){return Object.keys(e).reduce(function(t,n){return c.EventContextMap[n]&&(t[c.EventContextMap[n]]=e[n]),t},{})},p=function(){return a.getCookies({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(e){return"string"==typeof e&&e.split("|")[1]}}})},h=function(e){return-1!==Object.keys(c.PublishMethods).map(function(e){return c.PublishMethods[e]}).indexOf(e)},m=function(){function e(e){this.options=e,this.initialized=!1,this.muted=!1,s.ok(!e.publishMethod||h(e.publishMethod),'Unsupported publish method "'+e.publishMethod+'"'),this.loggerClientFactory=i.default.factory(e),this.withUserContext(p())}return e.prototype.initFactory=function(){if(this.initialized)return this.loggerClientFactory;this.initialized=!0;var e=u.getPublisher(this.options,this.transformer,this.publishFunctions);return this.loggerClientFactory.addPublisher(e)},e.prototype.withTransformer=function(e){return s.defined(e,"Transformer must be provided"),s.ok("function"==typeof e||e&&"function"==typeof e.postMessage,"Valid transformer must be provided"),this.transformer=e,this},e.prototype.withPublishFunction=function(e){return s.defined(e,"Publish function must be provided"),s.ok(e&&"function"==typeof e.postMessage,"Valid publish function must be provided"),this.publishFunctions=e,this},e.prototype.withUserContext=function(e){return s.defined(e,"User context object must be provided"),this.updateDefaults(d(e)),this},e.prototype.withUoUContext=function(e){return s.defined(e,"UoU context object must be provided"),this.updateDefaults(d(e)),this},e.prototype.updateDefaults=function(e){return this.loggerClientFactory.updateDefaults(e),this},e.prototype.setMuted=function(e){return this.muted=e,this},e.prototype.onError=function(e){return this.loggerClientFactory.setPublisherFailHandler(e),this},e.prototype.logger=function(e){void 0===e&&(e={});var t=this.initFactory().logger(e),n=this;return{log:function(e,r){return n.muted?Promise.resolve():t.log(e,r)}}},e}();t.Factory=m,t.factory=function(e){return void 0===e&&(e={}),new m(e)}},function(e,t,n){"use strict";var r=n(76),o=n(26);e.exports.BiLoggerFactory=r,e.exports.BiLogger=o,e.exports.factory=function(){return new r}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(25),s=n(26),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._publishers=[],this._validators=[],this._defaults={},this._events={}}return o(e,[{key:"addPublisher",value:function(e){return i.defined(e,"Publisher must be provided"),i.ok("function"==typeof e,"Expected a publisher function"),this._publishers.push(e),this}},{key:"addValidator",value:function(e){return i.defined(e,"Validator must be provided"),i.ok("object"===(void 0===e?"undefined":r(e))&&e,"Expected a validator object"),i.ok(e.execute&&e.match,"Provided validator does not match the interface"),this._validators.push(e),this}},{key:"setDefaults",value:function(e){return i.defined(e,"Defaults must be provided"),i.object(e,"Defaults must be an object"),this._defaults=e,this}},{key:"updateDefaults",value:function(e){return i.defined(e,"Defaults must be provided"),i.object(e,"Defaults must be an object"),Object.assign(this._defaults,e),this}},{key:"setEvents",value:function(e){return i.defined(e,"Events must be provided"),i.object(e,"Events must be an object"),this._events=e,this}},{key:"setDefaultValueTimeout",value:function(e){return i.defined(e,"Default Value Timeout must be provided"),this._defaultValueTimeout=e,this}},{key:"setDefaultContinueOnFail",value:function(e){return i.defined(e,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=e,this}},{key:"setPublisherFailHandler",value:function(e){return i.defined(e,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=e,this}},{key:"logger",value:function(e){return new s({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler},e)}}]),e}();e.exports=u},function(e,t,n){"use strict";e.exports.mapValues=function(e,t){return e?Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r,e),n},{}):{}}},function(e,t,n){"use strict";e.exports.timedPromise=function(e,t){var n=t.message,r=t.timeout,o=new Promise(function(e,t){setTimeout(t,r,n?"Timeout: "+n:"Timeout")});return Promise.race([e,o])},e.exports.allAsObject=function(e){var t=Object.keys(e);return Promise.all(t.map(function(t){return e[t]})).then(function(e){return e.reduce(function(e,n,r){return e[t[r]]=n,e},{})})}},function(e,t,n){"use strict";e.exports.log={error:function(){var e;console&&console.error&&(e=console).error.apply(e,arguments)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);t.defined=function(e,t){if(void 0===e)throw new r.AssertionError(t)},t.object=function(e,t){if(void 0!==e&&("object"!=typeof e||Array.isArray(e)||null===e))throw new r.AssertionError(t)},t.ok=function(e,t){if(!e)throw new r.AssertionError(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(2),i=n(5),s=n(12),u=n(4),a=n(82),c=function(e,t){var n;return t&&("function"==typeof t?n=t:t.postMessage&&e.publishMethod===i.PublishMethods.PostMessage&&(n=t.postMessage)),function(e){return e=function(e){return void 0===e&&(e={}),e.ms=Math.round(u.now()),e._lv=i.LoggerVersion,e}(e),n?n(e):e}};function f(e){return void 0===e&&(e={}),function(t,n){void 0===n&&(n={});var o=r.buildBiUrl(e,t,n);return a.beaconTransport(o).catch(function(){return a.pixelTransport(o,n.image)})}}function l(e){return void 0===e&&(e={}),function(t,n){void 0===n&&(n={});var o=r.buildBiUrl(e,t,n);return a.fetchTransport(o).catch(function(e){return e instanceof s.APINotSupportedError?a.xhrTransport(o):Promise.reject(e)})}}function d(e,t){return void 0===e&&(e={}),function(e){return a.postMessageTransport(e,t)}}t.imagePublisher=function(e){return void 0===e&&(e={}),function(t,n){void 0===n&&(n={});var o=r.buildBiUrl(e,t,n);return a.pixelTransport(o,n.image)}},t.beaconPublisher=f,t.fetchPublisher=l,t.xhrPublisher=function(e){return void 0===e&&(e={}),function(t,n){void 0===n&&(n={});var o=r.buildBiUrl(e,t,n);return a.xhrTransport(o)}},t.postMessagePublisher=d,t.resolvePublisher=function(e,t){var n,r;return e.publishMethod===i.PublishMethods.PostMessage?(n=d,r=t&&t.postMessage):n=o.isWebWorker()?l:f,n(e,r)},t.getPublisher=function(e,n,r){var o=t.resolvePublisher(e,r),i=c(e,n);return function(e,t){return o(i(e),t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(12);t.beaconTransport=function(e){return new Promise(function(t,n){return r.sendBeacon(e)?t():n(new Error("Transport Error: Cannot send bi using beacon"))})},t.pixelTransport=function(e,t){return new Promise(function(n,r){var o=t||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},o.src=e})},t.fetchTransport=function(e){return"undefined"==typeof fetch?Promise.reject(new o.APINotSupportedError("fetch")):fetch(e,{credentials:"include",keepalive:!0}).then(function(e){if(!e.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: "+e.status)})},t.xhrTransport=function(e){return new Promise(function(t,n){var r=location.protocol+":"+e,o=new XMLHttpRequest;o.open("GET",r),o.onload=function(){t()},o.onerror=function(){n(new Error("Transport Error: Cannot send bi using xhr."))},o.withCredentials=!0,o.send()})},t.postMessageTransport=function(e,t){void 0===t&&(t=self.postMessage);var n=[e];return"undefined"==typeof WorkerGlobalScope&&n.push("*"),t.apply(self,n)}},function(e,t,n){"use strict";var r=n(0),o=n(27),i=n(85),s=n(13);function u(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var a=u(s);a.Axios=i,a.create=function(e){return u(r.merge(s,e))},a.Cancel=n(31),a.CancelToken=n(99),a.isCancel=n(30),a.all=function(e){return Promise.all(e)},a.spread=n(100),e.exports=a,e.exports.default=a},function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(13),o=n(0),i=n(94),s=n(95);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=u},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],f=!1,l=-1;function d(){f&&a&&(f=!1,a.length?c=a.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=u(d);f=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(29);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";var r=n(0);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))}))}),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(o)&&u.push("path="+o),r.isString(i)&&u.push("domain="+i),!0===s&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,n){"use strict";var r=n(0),o=n(96),i=n(30),s=n(13),u=n(97),a=n(98);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!u(e.url)&&(e.url=a(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(31);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r,o,i,s,u,a,c;function f(e){return void 0!==e.before&&void 0!==e.after}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}n.r(t),function(e){e.Add="add",e.Remove="remove",e.Move="move",e.Resize="resize"}(r||(r={})),function(e){e.Question="question",e.Edit="edit",e.ThankYou="thank_you",e.Error="error"}(o||(o={})),function(e){e.Small="small",e.Large="large"}(i||(i={})),function(e){e.OpenQuestion="AI_FEEDBACK.OPEN_QUESTION",e.BeforeShowIframe="AI_FEEDBACK.BEFORE_SHOW_IFRAME"}(s||(s={})),function(e){e.Ready="AI_FEEDBACK.READY",e.CloseFrame="AI_FEEDBACK.CLOSE_FRAME",e.LayoutIsReady="AI_FEEDBACK.LAYOUT_IS_READY",e.LayoutMountError="AI_FEEDBACK.LAYOUT_MOUNT_ERROR"}(u||(u={})),function(e){e.FinishedFlow="finished-flow",e.Canceled="canceled",e.CanceledDueToError="canceled-due-to-error"}(a||(a={})),function(e){e.LayoutMountFailed="layout-mount-failed",e.LayoutMountFailedByTimeout="layout-mount-failed-by-timeout",e.ImageLoadFailed="image-load-failed",e.WrongShowParams="wrong-show-params"}(c||(c={}));var d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var h,m,v,g={FEEDBACK_SERVICE_BASE_URL:"https://media-feedback.wix.com/_api/feedback"},y={FEEDBACK_SERVICE_BASE_URL:"https://media-feedback-test.wix.com/_api/feedback"},b=d({},g,{AI_FEEDBACK_PAGE_URL:"https://apps.wix.com/user-feedback-client",EXPOSURE_SERVICE_BASE_URL:"https://media-feedback.wix.com/_api/exposure"}),w=d({},y,{AI_FEEDBACK_PAGE_URL:"http://local.wix.com:3003",EXPOSURE_SERVICE_BASE_URL:"https://media-feedback-test.wix.com/_api/exposure"});!function(e){e.RegionsEditor="regions-editor",e.RegionsSelection="regions-selection",e.TwoImagesToggle="two-images-toggle"}(h||(h={})),function(e){e.Question="question",e.Edit="edit",e.QuestionWithEdit="question-with-edit"}(m||(m={})),function(e){e.Start="start",e.Center="center",e.End="end"}(v||(v={}));var E,x=function(){function e(e){this.handlers=[],this.handlers=e}return e.prototype.log=function(e,t){this.handlers.forEach(function(n){return n(e,t)})},e.prototype.createLoggingHandler=function(e,t){var n=this;return function(r){return n.log(e,d({reason:r},t)),Promise.reject(r)}},e}(),_=function(){function e(e){void 0===e&&(e=[]),this.handlers=[],this.handlers=e.slice()}return e.prototype.addErrorHandler=function(t){return new e(this.handlers.concat([t]))},e.prototype.createLogger=function(){return new x(this.handlers)},e}();!function(e){e[e.RECOVERABLE=10]="RECOVERABLE",e[e.WARNING=20]="WARNING",e[e.ERROR=30]="ERROR",e[e.FATAL=40]="FATAL"}(E||(E={}));var O=n(14);var S,T,C,P=function(e){var t;if(e)return e instanceof Error?(e.name||"Error")+": '"+e.message+"'":"object"==typeof(t=e)&&null!==t&&"string"==typeof t.code&&"string"==typeof t.message?"Client error: "+e.code+". Message: "+e.message:Object(O.stringify)(e)},k=function(e){return String(e).slice(0,900)},R=function(e,t){return void 0===t&&(t={}),{errc:e.id,errn:e.name,sev:e.level||E.ERROR,extra:k(Object(O.stringify)(t.extra)),errorMessage:k(P(t.reason))}},A={opener:{experimentLoad:{id:1e3,name:"opener.experimentLoad",severity:E.FATAL},iframeLoad:{id:1001,name:"opener.iframeLoad",severity:E.FATAL},exposureRequest:{id:1002,name:"opener.exposureRequest",severity:E.FATAL}},openerHandlers:{layoutMountError:{id:1100,name:"openerHandlers.layoutMountError",severity:E.FATAL},layoutIsReadyHasNoFeedbackWindow:{id:1101,name:"openerHandlers.layoutIsReadyHasNoFeedbackWindow",severity:E.FATAL}}},j={feedbackSubmit:{submitError:{id:5e3,name:"feedbackSubmit.submitError",severity:E.RECOVERABLE}},iframeTransport:{sendMessage:{id:5100,name:"iframeTransport.sendMessage",severity:E.FATAL}},optOut:{disableQuestion:{id:5200,name:"optOut.disableQuestion",severity:E.RECOVERABLE}},lifecycle:{closeWindowFromRoot:{id:5300,name:"lifecycle.closeWindowFromRoot",severity:E.ERROR},noMatchPageWasShown:{id:5301,name:"lifecycle.noMatchPageWasShown",severity:E.ERROR},reactAppCatchError:{id:5302,name:"lifecycle.reactAppCatchError",severity:E.ERROR}}};!function(e){e.Multichoice="multichoice",e.FreeText="free-text",e.GoToEditPage="go-to-edit-page"}(S||(S={})),function(e){e.Options="firstlevel-options",e.OptionsWithEdit="firstlevel-options-with-edit",e.OptionsWithCustomEdit="firstlevel-options-with-custom-edit",e.Multichoice="firstlevel-multichoice",e.MultichoiceWithEdit="firstlevel-multichoice-with-edit",e.FreeText="firstlevel-free-text",e.ImageTags="firstlevel-image-tags"}(T||(T={})),function(e){e.Start="start",e.Center="center",e.End="end"}(C||(C={}));var M,F,I=function(e){void 0===e&&(e="");var t={};return e?(/^[?#]/.test(e)?e.slice(1):e).split("&").reduce(function(e,t){var n=t.split("="),r=n[0],o=n[1];return r&&o&&(e[decodeURIComponent(r)]=decodeURIComponent(o)),e},t):t};!function(e){e.Image="image",e.ImageWithRegions="image-with-regions",e.ImageCompareSlider="image-compare-slider"}(M||(M={})),function(e){e.Blue="blue",e.Light="light"}(F||(F={}));var L=n(32),B=n.n(L),D=n(33),U=n.n(D);function W(e,t){var n=t.config,r=n.FEEDBACK_SERVICE_BASE_URL,o=n.EXPOSURE_SERVICE_BASE_URL,i=t.options,s=i.locale,u=i.siteToken,a=i.metasiteId,c=i.origin,f=t.sessionId,l=t.categoryId,d=e.customContext,p=e.noDontShowAgain,h=e.questionId,m=e.triggerEvent,v=e.feedbackModel,g=e.thankYouPage,y=e.initiator;return{windowConfig:{locale:s,disableDontShowAgain:p,documentationLink:e.documentationLink},flowConfig:{thankYouPage:g},questionContext:{categoryId:l,customContext:d,initiator:y,metasiteId:a,origin:c,questionId:h,sessionId:f,siteToken:u,triggerEvent:m},questionModel:v,topologyConfig:{exposureServiceBaseUrl:o,feedbackServiceBaseUrl:r}}}function N(e,t){var n=t.startOpeningTime;return{meta:{startOpeningTime:void 0===n?(new Date).getTime():n,experiments:t.experiments},payload:W(e,t)}}function Q(e){var t=U.a.factory({endpoint:"feedback-service"}).updateDefaults(e).logger();return{log:function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n[0]&&n[0].metasiteId&&(n[0]=d({},n[0],{metasiteId:(e=n[0].metasiteId,e.replace(/^_template_/,""))})),t.log.apply(t,n)}}}var H,q,V=Q({src:94}),z=n(7),G=function(e){return e.data},K=function(){function e(e,t){var n=this;this.targetFrame=e,this.options=t,this.messagesEmitter=new z.EventEmitter,this.handleMessage=function(e){if(n.getTargetOrigin().includes(e.origin)){var t=G(e),r=t.type,o=t.data;n.messagesEmitter.emit(r,o)}},window.addEventListener("message",this.handleMessage)}return e.prototype.getTargetOrigin=function(){return this.options.targetOrigin},e.prototype.destroy=function(){this.messagesEmitter.removeAllListeners(),window.removeEventListener("message",this.handleMessage)},e.prototype.sendMessage=function(e){var t=this.targetFrame.contentWindow;if(!t)throw Error('can not send message "'+JSON.stringify(e)+'", no contentWindow');t.postMessage(e,this.getTargetOrigin())},e.prototype.waitForMessage=function(e){var t=this;return new Promise(function(n){t.messagesEmitter.once(e,function(e){n(e)})})},e.prototype.addListener=function(e,t){this.messagesEmitter.addListener(e,t)},e}();!function(e){e.FinishedFlow="finished-flow",e.Canceled="canceled",e.CanceledDueToError="canceled-due-to-error",e.ClosedByOpener="closed-by-opener"}(H||(H={})),function(e){e.Opened="opened",e.Closed="closed",e.Error="error"}(q||(q={}));var X,Y=n(34),J=n.n(Y),$=function(){function e(e,t){this.siteToken=t,this.transport=J.a.create({withCredentials:!0,baseURL:e.EXPOSURE_SERVICE_BASE_URL})}return e.prototype.getShouldAskQuestion=function(e){return this.transport.get("f/"+e+"?siteToken="+this.siteToken).then(function(e){return e.data.payload})},e}();!function(e){e.None="none",e.Opening="opening",e.Shown="shown"}(X||(X={}));var Z=function(e){V.log(d({},e,{evid:815}))};function ee(e,t,n){return r=this,o=void 0,i=Promise,s=function(){var r,o,i,s,u;return p(this,function(a){switch(a.label){case 0:return n.disableExposure?[2,{shouldExpose:!0}]:[4,e.getShouldAskQuestion(n.questionId)];case 1:return r=a.sent(),o=r.shouldExpose,i=r.categoryId,s=r.unExposedReason,u=t(i),Z(d({},u,{isAllowed:o},o?{}:{blockReason:s})),[2,r]}})},new(i||(i=Promise))(function(e,t){function n(e){try{a(s.next(e))}catch(e){t(e)}}function u(e){try{a(s.throw(e))}catch(e){t(e)}}function a(t){t.done?e(t.value):new i(function(e){e(t.value)}).then(n,u)}a((s=s.apply(r,o||[])).next())});var r,o,i,s}function te(e){return e.then(function(e){return{isError:!1,result:e}},function(e){return{isError:!0,error:e}})}function ne(e){return e.then(function(e){return e.isError?Promise.reject(e.error):Promise.resolve(e.result)})}var re="position: fixed; top: 0; left: 0; z-index: 6001; width: 100%; height: 100%; border: 0; background: rgba(255, 255, 255, 0.8);",oe=function(){function e(e,t,n){var r=document.createElement("iframe");r.src=e,r.id="userFeedback",r.title=t,r.setAttribute("style",re),r.style.display="none",n.appendChild(r),this.iframe=r}return e.prototype.show=function(){this.iframe.style.display="block";var e=this.iframe.contentWindow;e&&e.focus&&e.focus()},e.prototype.hide=function(){this.iframe.style.display="none"},e.prototype.destroy=function(){var e=this.iframe.parentNode;e&&e.removeChild(this.iframe)},Object.defineProperty(e.prototype,"wrappedIFrame",{get:function(){return this.iframe},enumerable:!0,configurable:!0}),e}(),ie=[];function se(e){ie.push(d({},e,{time:new Date}))}var ue=Q({src:94,evid:837}),ae=function(){var e=new _;return{withDefaultBi:function(t){return e.addErrorHandler(function(e,n){ue.log(d({},t,R(e,n)))}).createLogger()}}};function ce(e){switch(e){case a.Canceled:return H.Canceled;case a.FinishedFlow:return H.FinishedFlow;case a.CanceledDueToError:return H.CanceledDueToError;default:return H.Canceled}}var fe={debug:!1};var le=function(){function e(e,t){var n=this;void 0===t&&(t=fe),this.messagesEmitter=new z.EventEmitter,this.currentQuestion={state:X.None},this.feedbackWindow=void 0,this.loadExperimentsBag=function(){return n.experiments.ready().then(function(){return n.experiments.all()})},this.loadExperimentsBagWithLogging=function(e){var t=n.getBiDefaultParams(e)(void 0);return n.loadExperimentsBag().catch(n.errorLogger.withDefaultBi(t).createLoggingHandler(A.opener.experimentLoad))},this.emitErrorAndResetState=function(e){return function(t){n.currentQuestion={state:X.None},n.emitMessage({type:q.Error,showOptions:e,error:t})}},this.sendOpenQuestionMessage=function(e){var t=e.feedbackWindow,r=e.showOptions,o=e.sessionId,i=e.startOpeningTime,u=e.categoryId,a=e.experimentsBag;se({message:"Opener sends 'OpenQuestion' message",data:r}),t.transport.sendMessage({type:s.OpenQuestion,data:N(r,{config:n.config,options:n.options,sessionId:o,startOpeningTime:i,categoryId:u,experiments:a})})},this.sendBeforeShowMessage=function(e){var t=ie.slice();ie=[],e.transport.sendMessage({type:s.BeforeShowIframe,data:{openerBreadcrumbs:t}})},this.getBiDefaultParams=function(e){var t=e.sessionId,r=e.showOptionsComplete;return function(e){var o=r.questionId,i=r.triggerEvent,s=r.initiator;return d({sessionId:t,initiatorName:s,metasiteId:n.options.metasiteId,questionId:o,trigger:i,origin:n.options.origin},e?{categoryId:e}:{})}},this.unmuteIframePromiseWithLogging=function(e,t){return ne(e).catch(n.errorLogger.withDefaultBi(n.getBiDefaultParams(t)(void 0)).createLoggingHandler(A.opener.iframeLoad))},this.getShouldExposeWithLogging=function(e,t,r){return function(e,t){return"true"===t["specs.user-feedback.DisableExposure"]?Promise.resolve({shouldExpose:!0}):e}(ne(e),t).catch(n.errorLogger.withDefaultBi(n.getBiDefaultParams(r)(void 0)).createLoggingHandler(A.opener.iframeLoad))},this.errorLogger=ae(),this.options=e,this.config=function(e){var t=e.debug;return t?!0===t?w:d({},w,t):b}(t),this.exposureService=new $(this.config,this.options.siteToken),this.experiments=new B.a}return e.prototype.getURL=function(){return this.config.AI_FEEDBACK_PAGE_URL},e.prototype.init=function(){var e=this;se({message:"Opener is initializing iframe and transport"});var t,n,r,i,c,f=new oe(this.getURL(),"Some title",this.options.appendTo||document.body),l=(t=f.wrappedIFrame,n={targetOrigin:this.config.AI_FEEDBACK_PAGE_URL},new K(t,n)),p={iframe:f,transport:l,loadPromise:te((r=1e4,i=function(){return new Error("Iframe haven't sent READY message within given timeout.")},c=l.waitForMessage(u.Ready),new Promise(function(e,t){var n=setTimeout(function(){t(i())},r);c.then(function(t){clearTimeout(n),e(t)}).catch(function(e){clearTimeout(n),t(e)})})))};return this.experiments.load("user-feedback"),l.addListener(u.Ready,function(){var t;(se({message:"Opener received 'Ready' message (iframe reload handler)"}),e.currentQuestion.state===X.Shown)&&(t=e.getBiDefaultParams(e.currentQuestion)(void 0),V.log(d({},t,{evid:842})),e.feedbackWindow&&(se({message:"Opener hides iframe (iframe reload handler)"}),e.feedbackWindow.iframe.hide(),e.currentQuestion={state:X.Opening,showOptions:e.currentQuestion.showOptions,showOptionsComplete:e.currentQuestion.showOptionsComplete,sessionId:e.currentQuestion.sessionId},se({message:"Opener sends 'OpenQuestion' message (iframe reload handler)",data:e.currentQuestion.showOptions}),l.sendMessage({type:s.OpenQuestion,data:N(e.currentQuestion.showOptionsComplete,{config:e.config,options:e.options,sessionId:e.currentQuestion.sessionId,experiments:e.experiments.all()})})))}),l.addListener(u.LayoutIsReady,function(){if(se({message:"Opener received 'LayoutIsReady' message"}),e.currentQuestion.state!==X.None){var t,n=e.getBiDefaultParams(e.currentQuestion)(void 0);if(t=n,V.log(d({},t,{evid:844})),e.feedbackWindow){var r=e.currentQuestion,o=r.showOptions,i=r.showOptionsComplete,s=r.sessionId;e.currentQuestion={state:X.Shown,showOptions:o,showOptionsComplete:i,sessionId:s},se({message:"Opener shows iframe",data:o}),e.sendBeforeShowMessage(e.feedbackWindow),function(e){V.log(d({},e,{evid:845}))}(n),f.show(),e.emitMessage({type:q.Opened,showOptions:o})}else e.errorLogger.withDefaultBi(n).log(A.openerHandlers.layoutIsReadyHasNoFeedbackWindow)}}),l.addListener(u.LayoutMountError,function(t){if(se({message:"Opener received 'LayoutMountError' message",data:{error:t}}),e.currentQuestion.state===X.Opening){var n=e.getBiDefaultParams(e.currentQuestion)(void 0);e.errorLogger.withDefaultBi(n).log(A.openerHandlers.layoutMountError,{reason:t}),e.emitErrorAndResetState(e.currentQuestion.showOptions)(t)}}),l.addListener(u.CloseFrame,function(t){if(se({message:"Opener received 'CloseFrame' message",data:{result:t}}),e.currentQuestion.state!==X.None){var n=e.getBiDefaultParams(e.currentQuestion)(void 0);r=d({},n,{closeReason:ce(t.type)}),V.log(d({},r,{evid:846}))}var r,i,s=e.currentQuestion.state===X.None?void 0:e.currentQuestion,u=(i=s?e.getBiDefaultParams(s)(void 0):void 0,function(e){i&&V.log(d({},i,{pageName:e,evid:803}))});switch(t.type){case a.FinishedFlow:return Boolean(t.flowConfig&&t.flowConfig.thankYouPage)&&u(o.ThankYou),void e.hideByClose({closeReason:H.FinishedFlow,questionResult:t.data});case a.Canceled:return u(o.Question),void e.hideByClose({closeReason:H.Canceled});case a.CanceledDueToError:return u(o.Error),e.currentQuestion.state!==X.None&&e.emitMessage({type:q.Closed,showOptions:e.currentQuestion.showOptions,closeEventPayload:{closeReason:H.CanceledDueToError}}),void e.destroy();default:return void e.hideByClose({closeReason:H.Canceled})}}),p},e.prototype.hideByClose=function(e){if(this.feedbackWindow&&this.currentQuestion.state!==X.None){var t;t=this.getBiDefaultParams(this.currentQuestion)(void 0),V.log(d({},t,{evid:843})),se({message:"Opener hides iframe"}),this.feedbackWindow.iframe.hide();var n=this.currentQuestion.showOptions;this.currentQuestion={state:X.None},this.emitMessage({type:q.Closed,showOptions:n,closeEventPayload:e})}},e.prototype.emitMessage=function(e){this.messagesEmitter.emit(e.type,e)},e.prototype.preload=function(){var e;e={metasiteId:this.options.metasiteId,origin:this.options.origin,sessionId:this.currentQuestion.state===X.None?"no-session":this.currentQuestion.sessionId},V.log(d({},e,{evid:838})),se({message:"'preload' was called"}),this.feedbackWindow||(this.feedbackWindow=this.init())},e.prototype.closeFeedbackWindow=function(){se({message:"'closeFeedbackWindow' was called"}),this.hideByClose({closeReason:H.ClosedByOpener})},e.prototype.destroy=function(){var e;if(e={metasiteId:this.options.metasiteId,origin:this.options.origin,sessionId:this.currentQuestion.state===X.None?"no-session":this.currentQuestion.sessionId},V.log(d({},e,{evid:841})),se({message:"'destroy' was called"}),this.currentQuestion={state:X.None},this.feedbackWindow){var t=this.feedbackWindow,n=t.iframe,r=t.transport;n.destroy();try{r.destroy()}finally{this.feedbackWindow=void 0}}},e.prototype.addListener=function(e,t){return se({message:"'addListener' was called"}),this.messagesEmitter.addListener(e,t)},e.prototype.showQuestion=function(e){var t=this,n=function(e){var t=e.initiator;if(void 0===t)throw new Error('"initiator" parameter is required. Pass it via constructor or via showQuestion method');return{initiator:t}}(d({},this.options,e)),r=void this.options;if(r)this.emitMessage(r);else{var o=d({},e,n);if(this.currentQuestion.state===X.None){var i,s=(new Date).getTime(),u={state:X.Opening,showOptions:e,showOptionsComplete:o,sessionId:l()};this.currentQuestion=u,i=this.getBiDefaultParams(u)(void 0),V.log(d({},i,{evid:840})),se({message:"'showQuestion' was called",data:e});var a=this.feedbackWindow||(this.feedbackWindow=this.init()),c=te(ee(this.exposureService,this.getBiDefaultParams(u),e));Promise.all([this.loadExperimentsBagWithLogging(u),this.unmuteIframePromiseWithLogging(this.feedbackWindow.loadPromise,u)]).then(function(e){var n=e[0];return t.getShouldExposeWithLogging(c,n,u).then(function(e){var r=e.shouldExpose,i=e.categoryId;se({message:"'showQuestion' function received all required data",data:{shouldExpose:r}}),r?(!function(e){V.log(d({},e,{evid:801}))}(d({},t.getBiDefaultParams(u)(i))),t.sendOpenQuestionMessage({feedbackWindow:a,sessionId:u.sessionId,categoryId:i,experimentsBag:n,showOptions:o,startOpeningTime:s})):t.currentQuestion={state:X.None}})}).catch(this.emitErrorAndResetState(e))}else this.emitMessage({type:q.Error,showOptions:e,error:new Error("Cannot show question while another question is being opened. Try to close active question before showing new one.")})}},e}(),de=n(6);n.d(t,"EditRegionsActions",function(){return r}),n.d(t,"PageNames",function(){return o}),n.d(t,"isBeforeAfterImageDescriptor",function(){return f}),n.d(t,"FreeTextSize",function(){return i}),n.d(t,"ClientIncomingMessageTypes",function(){return s}),n.d(t,"ClientOutgoingMessageTypes",function(){return u}),n.d(t,"CloseReason",function(){return a}),n.d(t,"getRandomGuid4",function(){return l}),n.d(t,"ClientErrorCodes",function(){return c}),n.d(t,"debugConfig",function(){return w}),n.d(t,"prodConfig",function(){return b}),n.d(t,"feedbackDebugConfig",function(){return y}),n.d(t,"feedbackProdConfig",function(){return g}),n.d(t,"EditContentElementTypes",function(){return h}),n.d(t,"FeedbackTypes",function(){return m}),n.d(t,"QuestionJustifyContent",function(){return v}),n.d(t,"ErrorLoggerConfigurator",function(){return _}),n.d(t,"Severity",function(){return E}),n.d(t,"getErrorBiParams",function(){return R}),n.d(t,"OPENER_ERRORS",function(){return A}),n.d(t,"CLIENT_ERRORS",function(){return j}),n.d(t,"parseSearch",function(){return I}),n.d(t,"QuestionContentElementTypes",function(){return M}),n.d(t,"MenuElementType",function(){return S}),n.d(t,"FirstLevelAnswerElementType",function(){return T}),n.d(t,"AnswerJustifyContent",function(){return C}),n.d(t,"OpenerEvent",function(){return de.OpenerEvent}),n.d(t,"OpenerEventTypes",function(){return q}),n.d(t,"OpenerEventClosed",function(){return de.OpenerEventClosed}),n.d(t,"CloseReasonType",function(){return H}),n.d(t,"ShowOptions",function(){return de.ShowOptions}),n.d(t,"QuestionPageTheme",function(){return F});t.default=le}])});
//# sourceMappingURL=UserFeedbackOpener.bundle.min.js.map